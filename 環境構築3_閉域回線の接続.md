# Azure – OCI 閉域接続（ExpressRoute × FastConnect）構築手順

## 概要

本手順書では、Microsoft AzureのExpressRouteと、Oracle Cloud Infrastructure（OCI）のFastConnectを用いて、両クラウド間を閉域接続する手順を説明します。

構成の流れは以下の通りです。

1. Azure側でExpressRoute Circuitを作成
2. OCI側でFastConnect（プライベート仮想回線）を作成
3. ExpressRoute CircuitとVirtual Network Gatewayを接続
4. 双方向の疎通確認

本手順では、AzureのExpressRoute GatewayおよびOCIのDRGは事前に作成済みであることを前提とします。

---

## ExpressRoute（ExpressRoute Circuit）回線の作成

Azure Portalで「ExpressRoute」と検索し、「ExpressRoute circuits」を押下する。<br>

![alt text](/img/image-16.png)<br>

<br>

「作成」を押下する。<br>

![alt text](/img/image-17.png)<br>

<br>

### 基本タブ

以下の通り入力する。

| 項目 | 入力方法 |
|:---------|:---------|
| サブスクリプション | 作成したリソースグループが存在するサブスクリプション |
| リソース グループ | 作成したネットワークが存在するリソースグループ |
| 回復性 | 標準の回復性 |
| リージョン | 仮想ネットワークと同じリージョン |
| 回線名 | ExpressRoute回線の名前 |
| ポートの種類 | プロバイダー |
| ピアリングの場所 | Tokyo |
| プロバイダー | Oracle Cloud FastConnect |
| 帯域幅 | 50Mbps |

![alt text](/img/image-15.png)<br>

<br>

監視タブにて、推奨されるアラートを有効化する。  

![alt text](<スクリーンショット 2026-02-14 063558.png>)<br>

<br>

「確認および作成」で作成する。  

※このとき、回線の「サービスキー」を控えておく。

<br>

---

## FastConnectの作成

OCIポータルの左ペインより、「ネットワーキング」→「FastConnect」を押下する。

![alt text](</img/スクリーンショット 2026-02-14 065347.png>)<br>

<br>

### 接続タイプ

以下の通り入力する。

| 項目 | 入力方法 |
|:---------|:---------|
| 接続タイプ | FastConnectパートナー |
| 冗長性レベル | 単一の仮想回線 |

![alt text](</img/スクリーンショット 2026-02-14 065652.png>)<br>

<br>

### 構成

以下の通り入力する。

| 項目 | 入力方法 |
|:---------|:---------|
| 仮想回線タイプ | プライベート仮想回線 |
| 動的ルーティング・ゲートウェイ | 作成したDRG |
| プロビジョニングされた帯域幅 | 1Gbps |
| パートナー・サービスキー | 作成したExpressRoute回線のサービスキー |
| 顧客プライマリBGP IPアドレス | 任意のIPアドレス範囲 |
| OracleプライマリBGP IPアドレス | 任意のIPアドレス範囲 |
| 顧客セカンダリBGP IPアドレス | 任意のIPアドレス範囲 |
| OracleセカンダリBGP IPアドレス | 任意のIPアドレス範囲 |

![alt text](</img/スクリーンショット 2026-02-14 071233.png>)<br>

<br>

作成後、Azure側のExpressRoute回線の「プロバイダーの状態」が「プロビジョニング済み」になることを確認する。

![alt text](</img/スクリーンショット 2026-02-14 072221.png>)<br>

<br>

---

## ExpressRoute回線とゲートウェイの接続

ExpressRoute Gatewayの画面で、左ペイン「設定」→「接続」を押下し、「追加」を選択する。  

![alt text](</img/スクリーンショット 2026-02-14 080339.png>)<br>

<br>

### 基本タブ

| 項目 | 入力方法 |
|:---------|:---------|
| サブスクリプション | 作成したリソースグループが存在するサブスクリプション |
| リソース グループ | 作成したネットワークが存在するリソースグループ |
| 接続の種類 | ExpressRoute |

![alt text](</img/スクリーンショット 2026-02-14 080442.png>)<br>

<br>

### 設定タブ

| 項目 | 入力方法 |
|:---------|:---------|
| 回復性 | 標準の回復性 |
| 仮想ネットワークゲートウェイ | 作成したExpressRoute Gateway |
| ExpressRoute回線 | 作成したExpressRoute回線の名前 |

![alt text](</img/スクリーンショット 2026-02-14 080651.png>)<br>

<br>

---

## 疎通確認

### Azure → OCI

Azure側の仮想マシンへRDP接続する。（本手順ではBastionを使用）

![alt text](</img/スクリーンショット 2026-02-14 082107.png>)<br>

<br>

OCI側のインスタンスに対してpingを実行し、疎通確認を行う。

![alt text](</img/スクリーンショット 2026-02-14 082439.png>)<br>

<br>

---

### ExpressRouteの設定確認

ExpressRoute回線の  「設定」→「構成」より  「リモート仮想ネットワークからのトラフィックを許可します。」  にチェックを入れる。

![alt text](</img/スクリーンショット 2026-02-14 083109.png>)

---

### OCI → Azure

OCI側のインスタンスからAzure側仮想マシンへpingを実行し、双方向の疎通が可能であることを確認する。

---

以上で、AzureとOCI間の閉域接続構築は完了です。